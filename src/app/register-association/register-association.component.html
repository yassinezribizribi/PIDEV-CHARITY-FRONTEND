<!-- register-association.component.html -->
<app-navbar />
<!-- Hero Section (unchanged) -->
<section class="bg-half-170 d-table w-100" style="background: url('assets/images/hero/pages.jpg') center;">
  <!-- ... existing hero section content ... -->
</section>

<div class="position-relative">
  <div class="shape overflow-hidden text-white">
    <svg viewBox="0 0 2880 48" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M0 48H1437.5H2880V0H2160C1442.5 52 720 0 720 0H0V48Z" fill="currentColor"></path>
    </svg>
  </div>
</div>

<div class="container mt-4">
  <h2 class="text-center mb-4">Register Your Association</h2>

  <form (ngSubmit)="onSubmit()" #associationForm="ngForm">
    <!-- Error Message -->
    <div *ngIf="submissionError" class="alert alert-danger mb-3">
      {{ errorMessage }}
    </div>

    <!-- Association Name -->
    <div class="col-12 mb-3">
      <label class="form-label">Association Name <span class="text-danger">*</span></label>
      <input 
        type="text" 
        class="form-control" 
        [(ngModel)]="association.associationName" 
        name="associationName" 
        #nameField="ngModel"
        required
        pattern="^[A-Za-z\s]{3,50}$"
        placeholder="Enter association name (letters only)"
        [ngClass]="{'is-invalid': nameField.invalid && (nameField.dirty || nameField.touched)}"
      >
      <div class="invalid-feedback" *ngIf="nameField.invalid && (nameField.dirty || nameField.touched)">
        <div *ngIf="nameField.errors?.['required']">Association name is required.</div>
        <div *ngIf="nameField.errors?.['pattern']">Association name must be 3-50 characters long and can only contain letters and spaces.</div>
      </div>
    </div>

    <!-- Association Address -->
    <div class="col-12 mb-3">
      <label class="form-label">Address <span class="text-danger">*</span></label>
      <input 
        type="text" 
        class="form-control" 
        [(ngModel)]="association.associationAddress" 
        name="associationAddress" 
        #addressField="ngModel"
        required
        [ngClass]="{'is-invalid': addressField.invalid && (addressField.dirty || addressField.touched)}"
      >
      <div class="invalid-feedback" *ngIf="addressField.invalid && (addressField.dirty || addressField.touched)">
        Address is required.
      </div>
    </div>

    <!-- Association Phone -->
    <div class="col-12 mb-3">
      <label class="form-label">
        Phone Number <span class="text-danger">*</span>
      </label>
      <input
        type="tel"
        class="form-control"
        [(ngModel)]="association.associationPhone"
        name="associationPhone"
        #phoneField="ngModel"
        required
        pattern="[0-9]{8}"
        placeholder="Enter 8-digit phone number"
        [ngClass]="{'is-invalid': phoneField.invalid && (phoneField.dirty || phoneField.touched)}"
      >
      <div class="invalid-feedback" *ngIf="phoneField.invalid && (phoneField.dirty || phoneField.touched)">
        <div *ngIf="phoneField.errors?.['required']">Phone number is required.</div>
        <div *ngIf="phoneField.errors?.['pattern']">Please enter a valid 8-digit phone number.</div>
      </div>
    </div>

    <!-- Association Email -->
    <div class="col-12 mb-3">
      <label class="form-label">Email <span class="text-danger">*</span></label>
      <input
        type="email"
        class="form-control"
        [(ngModel)]="association.associationEmail"
        name="associationEmail"
        #emailField="ngModel"
        required
        pattern="^[\w\-\.]+@([\w-]+\.)+[\w-]{2,}$"
        placeholder="Enter email address"
        [ngClass]="{'is-invalid': emailField.invalid && (emailField.dirty || emailField.touched)}"
      />
      <div class="invalid-feedback" *ngIf="emailField.invalid && (emailField.dirty || emailField.touched)">
        <div *ngIf="emailField.errors?.['required']">Email is required.</div>
        <div *ngIf="emailField.errors?.['pattern']">Please enter a valid email address.</div>
      </div>
    </div>

    <!-- Description -->
    <div class="col-12 mb-3">
      <label class="form-label">Description <span class="text-danger">*</span></label>
      <textarea 
        class="form-control" 
        rows="4" 
        [(ngModel)]="association.description" 
        name="description" 
        #descriptionField="ngModel"
        required
        [ngClass]="{'is-invalid': descriptionField.invalid && (descriptionField.dirty || descriptionField.touched)}"
      ></textarea>
      <div class="invalid-feedback" *ngIf="descriptionField.invalid && (descriptionField.dirty || descriptionField.touched)">
        Description is required.
      </div>
    </div>

    <!-- Logo Upload -->
    <div class="col-12 mb-3">
      <label class="form-label">Association Logo</label>
      <input 
        type="file" 
        class="form-control" 
        name="associationLogo" 
        (change)="onFileChange($event, 'associationLogoPath')" 
        accept="image/png, image/jpeg, image/jpg"
        [ngClass]="{'is-invalid': logoError}"
      >
      <div class="invalid-feedback" *ngIf="logoError">{{ logoError }}</div>
    </div>

    <!-- Registration Document Upload -->
    <div class="col-12 mb-3">
      <label class="form-label">Registration Document <span class="text-danger">*</span></label>
      <input 
        type="file" 
        class="form-control" 
        (change)="onFileChange($event, 'registrationDocumentPath')" 
        accept="application/pdf" 
        required
        [ngClass]="{'is-invalid': registrationDocError}"
      >
      <div class="invalid-feedback" *ngIf="registrationDocError">{{ registrationDocError }}</div>
    </div>

    <!-- Legal Document Upload -->
    <div class="col-12 mb-3">
      <label class="form-label">Legal Document <span class="text-danger">*</span></label>
      <input 
        type="file" 
        class="form-control" 
        (change)="onFileChange($event, 'legalDocumentPath')" 
        accept="application/pdf" 
        required
        [ngClass]="{'is-invalid': legalDocError}"
      >
      <div class="invalid-feedback" *ngIf="legalDocError">{{ legalDocError }}</div>
    </div>

    <!-- Submit Button -->
    <div class="form-group text-center">
      <button
        type="submit"
        id="associationSubmitBtn"
        class="btn btn-primary"
        [disabled]="!associationForm?.form?.valid || isSubmitting || !areFilesValid()"
      >
        <span *ngIf="isSubmitting" class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span>
        {{ isSubmitting ? 'Submitting...' : 'Submit' }}
      </button>
    </div>

    <!-- Success Message -->
    <div *ngIf="submissionSuccess" class="alert alert-success mt-3" role="alert">
      Your association has been successfully registered!
    </div>
  </form>
</div>

<app-footer />