<!-- Hero Start -->
<section class="bg-half-170 d-table w-100" style="background: url('assets/images/hero/pages.jpg') center;">
    <div class="bg-overlay bg-gradient-overlay"></div>
    <div class="container text-center">
        <h5 class="heading fw-semibold sub-heading text-white title-dark">TÃ©moignages</h5>
    </div>
</section>

<!-- Testimonial Section -->
<section class="section py-5">
    <div class="container">
        <!-- âœ… Affichage du chargement -->
        <div *ngIf="testimonials.length === 0" class="text-center text-muted">
            <p>Aucun tÃ©moignage disponible.</p>
        </div>

        <div class="row">
            <div *ngFor="let testimonial of testimonials; let i = index" class="col-lg-4 col-md-6 col-12">
                <div class="testimonial-card p-4 shadow rounded">
                    <h6 class="mb-2">TÃ©moignage #{{ i + 1 }}</h6>
                    <p class="text-muted fst-italic">" {{ testimonial.content }} "</p>
                    <div class="d-flex align-items-center">
                        <img *ngIf="testimonial.beforePhoto" [src]="testimonial.beforePhoto" class="avatar rounded-circle shadow" alt="Before">
                        <div class="ms-2">
                            <h6 class="text-dark small">{{ testimonial.description }}</h6>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- âœ… Bouton "Recharger" pour rafraÃ®chir les tÃ©moignages -->
        <div class="row justify-content-center mt-4">
            <button class="btn btn-primary btn-lg" (click)="refreshTestimonials()">ðŸ”„ Recharger</button>
        </div>
    </div>
</section>

<!-- Formulaire d'Ajout -->
<section class="section py-5">
    <div class="container">
        <h2 class="text-center">Ajouter un TÃ©moignage</h2>
        <form [formGroup]="testimonialForm" (ngSubmit)="saveTestimonial()" class="testimonial-form">
            <div class="mb-3">
                <label for="content" class="form-label">Contenu</label>
                <input id="content" formControlName="content" class="form-control" required>
                <small class="text-danger" *ngIf="testimonialForm.controls['content'].invalid && testimonialForm.controls['content'].touched">
                    Le contenu est obligatoire et doit contenir au moins 10 caractÃ¨res.
                </small>
            </div>
            <div class="mb-3">
                <label for="beforePhoto" class="form-label">Photo Avant</label>
                <input id="beforePhoto" formControlName="beforePhoto" class="form-control">
            </div>
            <div class="mb-3">
                <label for="afterPhoto" class="form-label">Photo AprÃ¨s</label>
                <input id="afterPhoto" formControlName="afterPhoto" class="form-control">
            </div>
            <div class="mb-3">
                <label for="description" class="form-label">Description</label>
                <textarea id="description" formControlName="description" class="form-control"></textarea>
                <small class="text-danger" *ngIf="testimonialForm.controls['description'].invalid && testimonialForm.controls['description'].touched">
                    La description est obligatoire.
                </small>
            </div>
            <div class="text-center">
                <button type="submit" class="btn btn-success btn-lg">âž• Ajouter</button>
            </div>
        </form>
    </div>
</section>
<app-footer></app-footer>
