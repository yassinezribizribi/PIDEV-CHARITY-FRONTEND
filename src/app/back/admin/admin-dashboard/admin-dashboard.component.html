<app-admin-navbar />
<section class="bg-half-170 d-table w-100" style="background: url('assets/images/hero/pages.jpg') center;">
  <div class="bg-overlay bg-gradient-overlay"></div>
  <div class="container">
    <div class="row mt-5 justify-content-center">
      <div class="col-12">
        <div class="title-heading text-center">
          <h5 class="heading fw-semibold mb-0 sub-heading text-white title-dark">Admin Dashboard</h5>
        </div>
      </div>
    </div>
    <div class="position-middle-bottom">
      <nav aria-label="breadcrumb" class="d-block">
        <ul class="breadcrumb breadcrumb-muted mb-0 p-0">
          <li class="breadcrumb-item"><a [routerLink]="'/'">solidarity</a></li>
          <li class="breadcrumb-item active" aria-current="page">Admin Dashboard</li>
        </ul>
      </nav>
    </div>
  </div>
</section>

<div class="position-relative">
  <div class="shape overflow-hidden text-white">
    <svg viewBox="0 0 2880 48" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M0 48H1437.5H2880V0H2160C1442.5 52 720 0 720 0H0V48Z" fill="currentColor"></path>
    </svg>
  </div>
</div>

<section class="section">
  <div class="container">
    <div class="row">
      <div class="col-12">
        <h3 class="mb-4">Admin Dashboard</h3>

        <div class="card shadow border-0 p-4">
          <h5 class="card-title">Manage Crises</h5>
          <div class="table-responsive">
            <table class="table table-hover">
              <thead>
                <tr>
                  <th>ID</th>
                  <th>Category</th>
                  <th>Location</th>
                  <th>Description</th>
                  <th>Date</th>
                  <th>Severity</th>
                  <th>Reported By (User ID)</th>
                  <th>Actions</th> 
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let crisis of crises">
                  <td>{{ crisis.idCrisis ?? 'N/A' }}</td>
                  <td>{{ crisis.categorie || 'N/A' }}</td>
                  <td>{{ crisis.location || 'N/A' }}</td>
                  <td>{{ crisis.description || 'N/A' }}</td>
                  <td>{{ crisis.crisisDate ? (crisis.crisisDate | date:'short') : 'N/A' }}</td>
                  <td>
                    <span [ngClass]="getSeverityClass(crisis.severity)">
                      <i class="bi me-1" [ngClass]="getSeverityIcon(crisis.severity)"></i>
                      {{ crisis.severity }}
                    </span>
                  </td>
                  <td>{{ crisis.idUser || 'N/A' }}</td>
                  <td>
                    <button class="btn btn-danger btn-sm" (click)="deleteCrisis(crisis.idCrisis)">Delete</button>
                    <button class="btn btn-primary btn-sm" (click)="updateCrisis(crisis)">Update</button>
                    <button class="btn btn-info btn-sm" (click)="viewDetails(crisis)">View</button>

                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

      </div>
    </div>
  </div>
</section>
